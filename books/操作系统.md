# 操作系统

- 内存

- 文件

- 进程

  

  目的：告诉你**「操作系统是如何工作的」**

  **「Data structures + Algorithms = Programming」**

  假设把计算机比作一栋楼，计算机的底层相当于就是楼的根基，计算机应用相当于就是楼的外形，而操作系统就相当于是告诉你大楼的构造原理，编写高质量的软件就相当于是告诉你构建一个稳定的房子。



## 认识操作系统

在了解操作系统前，你需要先知道一下什么是计算机系统：现代计算机系统由**「一个或多个处理器、主存、打印机、键盘、鼠标、显示器、网络接口以及各种输入/输出设备构成的系统」**。这些都属于`硬件`的范畴。我们程序员不会直接和这些硬件打交道。所以计算机科学家在硬件的基础之上，安装了一层软件，**这层软件能够根据用户输入的指令达到控制硬件的效果**，从而满足用户的需求，这样的软件称为 `操作系统`，它的任务就是为用户程序提供一个更好、更简单、更清晰的计算机模型。

总结：操作系统相当于是一个中间层，为用户层和硬件提供各自的接口，屏蔽了不同应用和硬件之间的差异，达到统一标准的作用。

![图片](https://mmbiz.qpic.cn/mmbiz_png/libYRuvULTdXlPc9jU85pV5kdSicQXs4vE1ltBQ0S0WJCwpEdokmsH8D2OKUq6lLBzmRpZBgXf2tt9ATqbt5hZJg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

最底层是硬件，硬件包括**「芯片、电路板、磁盘、键盘、显示器」**等我们上面提到的设备，在硬件之上是软件。大部分计算机有两种运行模式：`内核态` 和 `用户态`，软件中最基础的部分是`操作系统`，它运行在 `内核态`中。操作系统具有硬件的访问权，可以执行机器能够运行的任何指令。软件的其余部分运行在 `用户态` 下。



## 计算机硬件

计算机硬件是计算机的重要组成部分，其中包含了 5 个重要的组成部分：**「运算器、控制器、存储器、输入设备、输出设备」**。

- `运算器`：对数据和信息进行加工和运算。运算器的基本运算包括加、减、乘、除、移位等操作，这些是由 `算术逻辑单元(Arithmetic&logical Unit)` 实现的。而运算器主要由算数逻辑单元和寄存器构成。
- `控制器`：控制命令执行的作用，按照指定顺序改变主电路或控制电路的部件，完成协调和指挥整个计算机系统的操作。控制器是由程序计数器、指令寄存器、解码译码器等构成。

> 
>
> 运算器和控制器共同组成了 CPU
>
> 

- `存储器`：`记忆设备`，保存信息。存储器分为两种，一种是主存（内存），是 CPU 主要交互对象，还有一种是外存，比如硬盘软盘等。
- `输入设备`：输入设备是给计算机获取外部信息的设备，它主要包括键盘和鼠标。
- `输出设备`：输出设备是给用户呈现根据输入设备获取的信息经过一系列的计算后得到显示的设备，它主要包括显示器、打印机等。

这也是冯诺伊曼的体系结构，它认为计算机必须具有如下功能：

> 把需要的程序和数据送至计算机中。必须具有长期记忆程序、数据、中间结果及最终运算结果的能力。能够完成各种算术、逻辑运算和数据传送等数据加工处理的能力。能够根据需要控制程序走向，并能根据指令控制机器的各部件协调操作。能够按照要求将处理结果输出给用户。

![图片](https://mmbiz.qpic.cn/mmbiz_png/libYRuvULTdXlPc9jU85pV5kdSicQXs4vE3rzQbWdHnqialnHOYFn4crovxnUXVKuYRDmkE7o2sfB5gjibERIO2iakg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

## 进程和线程

进程是对正在运行中的程序的一个抽象。

在多道程序处理的系统中，CPU 会在`进程`间快速切换，使每个程序运行几十或者几百毫秒。严格意义来说，在某一个瞬间，CPU 只能运行一个进程，然而我们如果把时间定位为 1 秒内的话，它可能运行多个进程。这样就会让我们产生`并行`的错觉。因为 CPU 执行速度很快，进程间的换进换出也非常迅速，因此我们很难对多个并行进程进行跟踪。所以，操作系统的设计者开发了用于描述并行的一种概念模型（顺序进程），使得并行更加容易理解和分析。

