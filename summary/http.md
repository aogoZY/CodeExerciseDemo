# 1、http 版本区别

- H T T P是一种简单无状态，纯文本的客户端服务器协议，他用于在客户端和服务器之间进行数据交换。
- 请求方法是请求行中的第一个单词，他指明了客户端想要对资源执行的操作。

​      http 0.9只有get方法

​      http 1.0添加了post和head方法

​      http 1.1则添加了put、delete、options、 trace、connect五个方法。

- 幂等的请求方法：一个http方法在使用相同的数据进行第二次调用的时候不会对服务器的状态造成任何改变，这个方法称为幂等。eg：put、delete。

# 2、https vs http

​		超文本传输协议HTTP协议被用于在Web浏览器和网站服务器之间传递信息，HTTP协议以明文方式发送内容，不提供任何方式的数据加密，如果攻击者截取了Web浏览器和网站服务器之间的传输报文，就可以直接读懂其中的信息，因此，HTTP协议不适合传输一些敏感信息，比如：信用卡号、密码等支付信息。

　　为了解决HTTP协议的这一缺陷，需要使用另一种协议：安全套接字层超文本传输协议HTTPS，为了数据传输的安全，HTTPS在HTTP的基础上加入了SSL协议，SSL依靠证书来验证服务器的身份，并为浏览器和服务器之间的通信加密。

​		HTTPS是一种通过计算机网络进行安全通信的传输协议，经由HTTP进行通信，利用SSL/TLS建立全信道，加密数据包。HTTPS使用的主要目的是提供对网站服务器的身份认证，同时保护交换数据的隐私与完整性。

**二、HTTP与HTTPS有什么区别？**

　　HTTP协议传输的数据都是未加密的、明文的，因此使用HTTP协议传输隐私信息非常不安全，为了保证这些隐私数据能加密传输，于是设计了SSL（Secure Sockets Layer）协议用于对HTTP协议传输的数据进行加密，从而就诞生了HTTPS。简单来说，HTTPS协议是由SSL+HTTP协议构建的可进行**加密传输、身份认证**的网络协议，要比http协议安全。

　　HTTPS和HTTP的区别主要如下：

　　1、https协议需要到ca申请证书，一般免费证书较少，因而需要一定费用。

　　2、http是超文本传输协议，信息是明文传输，https则是具有安全性的ssl加密传输协议。

　　3、http和https使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是443。

　　4、http的连接很简单，是无状态的；HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议，比http协议安全。



|          | http                              | https                                              |
| -------- | --------------------------------- | -------------------------------------------------- |
| 概念     | 超文本传输协议                    | 安全套接字层超文本传输协议HTTPS                    |
| 用途     | Web浏览器和网站服务器之间传递信息 | 对网站服务器的身份认证；保护交换数据的隐私与完整性 |
| 公式     |                                   | https=http+ssl                                     |
| 加密     | 未加密，不安全                    | 加密，安全                                         |
| 费用     |                                   | 需要到ca申请证书，收费                             |
| 端口     | 80                                | 443                                                |
| 适用场景 |                                   | 信用卡号、支付                                     |

**三、HTTPS的工作原理**

![HTTP与HTTPS的区别-马海祥博客](http://www.mahaixiang.cn/uploads/allimg/1507/1-150H120343I41.jpg)

　客户端在使用HTTPS方式与Web服务器通信时有以下几个步骤，如图所示。

　　（1）客户使用https的URL访问Web服务器，要求与Web服务器建立SSL连接。

　　（2）Web服务器收到客户端请求后，会将**网站的证书信息（证书中包含公钥）传送一份给客户端**。

　　（3）客户端的浏览器与Web服务器开始协商SSL连接的安全等级，也就是信息加密的等级。

　　（4）客户端的浏览器根据双方同意的安全等级，建立会话密钥，然后利用网站的公钥将会话密钥加密，并传送给网站。

　　（5）Web服务器利用自己的私钥解密出会话密钥。

　　（6）Web服务器利用会话密钥加密与客户端之间的通信。

**四、HTTPS的优点**

　　主要有以下几个好处：

　　（1）使用HTTPS协议可认证用户和服务器，确保数据发送到正确的客户机和服务器；

　　（2）HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议，要比http协议安全，可防止数据在传输过程中不被窃取、改变，确保数据的完整性。

　　（3）HTTPS是现行架构下最安全的解决方案，虽然不是绝对安全，但它大幅增加了中间人攻击的成本。

**五、HTTPS的缺点**

　　虽然说HTTPS有很大的优势，但其相对来说，还是存在不足之处的：

　　（1）HTTPS协议握手阶段比较费时，会使页面的加载时间延长近50%，增加10%到20%的耗电；

　　（2）HTTPS连接缓存不如HTTP高效，会增加数据开销和功耗，甚至已有的安全措施也会因此而受到影响；

　　（3）SSL证书需要钱，功能越强大的证书费用越高，个人网站、小网站没有必要一般不会用。

　  （4）SSL证书通常需要绑定IP，不能在同一IP上绑定多个域名

　　

**六、http切换到HTTPS**

　　如果需要将网站从http切换到https到底该如何实现呢？

   这里需要将页面中所有的链接，例如js，css，图片等等链接都由http改为https。例如：http://www.baidu.com改为https://www.baidu.com

　　HTTPS协议的主要作用可以分为两种：一种是建立一个信息安全通道，来保证数据传输的安全；另一种就是确认网站的真实性。

　　HTTPS协议的主要作用可以分为两种：一种是建立一个信息安全通道，来保证数据传输的安全；另一种就是确认网站的真实性。

# 3、tcp三次握手四次挥手

#### **为什么需要三次握手？**

**为了防止已失效的连接请求报文段突然又传送到了服务端**，造成资源浪费

eg:client发出的第一个连接请求报文段并没有丢失，而是在某个网络结点长时间的滞留了，以致延误到连接释放以后的某个时间才到达server。本来这是一个早已失效的报文段。但server收到此失效的连接请求报文段后，就误认为是client再次发出的一个新的连接请求。于是就向client发出确认报文段，同意建立连接

假设不采用“三次握手”，那么只要server发出确认，新的连接就建立了。由于现在client并没有发出建立连接的请求，因此不会理睬server的确认，也不会向server发送数据。但server却以为新的运输连接已经建立，并一直等待client发来数据。这样，server的很多资源就白白浪费掉了。采用“三次握手”的办法可以防止上述现象发生。例如刚才那种情况，client不会向server的确认发出确认。server由于收不到确认，就知道client并没有要求建立连接。主要目的防止server端一直等待，浪费资源。

#### **为什么关闭连接需要四次挥手呢？**

关闭连接时，当收到对方的FIN报文时，仅仅表示对方不再发送数据了但是还能接收数据，己方也未必全部数据都发送给对方了，所以己方可以立即close，也可以发送一些数据给对方后，再发送FIN报文给对方来表示同意现在关闭连接



# 4、TCP,UDP通信使用场景及区别比较

TCP通信协议

- TCP是面向连接的；
- 每条TCP连接只能由于两个端点，一对一通信；
- TCP提供可靠的交付服务，传输数据无差错，不丢失，不重复，且按时序到达；
- TCP提供全双工通信；
- 面向字节流，TCP根据对方给出的窗口和当前的网络拥塞程度决定一个报文应该包含多少个字节。



UDP通信协议

- 无连接；
- UDP使用尽最大努力交付，不保证可靠性UDP;是面向报文的，UDP对应用层交付下来的报文，既不合并，也不拆分，而是保留报文的边界；
- 应用层交给UDP多长的报文，UDP就照样发送，即一次发送一个报文；
- UDP没有拥塞控制；
- UDP支持一对一，一对多，多对一和多对多的交互通信。
- UDP的首部开销小，只有8字节。

|            | TCP                                                          | UDP                               |
| ---------- | ------------------------------------------------------------ | --------------------------------- |
| 连接性     | 面向连接                                                     | 不需建立连接                      |
| 可靠性     | 可靠性的服务;无差错、不丢失、不重复、按顺序到达(校验和，重传控制，序号标识，滑动窗口、确认应答实现可靠传输) | 尽最大努力交付,不保证可靠性       |
| 工作效率   | 低                                                           | 高,适用高速传播和实时性较高的通信 |
| 连接方式   | 点到点                                                       | 一对一，一对多，多对一和多对多    |
| 对资源要求 | 多                                                           | 少                                |
| 适用场景   | 传输文件                                                     | 会议视频图像                      |



# 5、从输入url到页面加载完成发生了什么

​	   1、浏览器的地址栏输入URL并按下回车。

　　2、浏览器查找当前URL是否存在缓存，并比较缓存是否过期。

　　3、DNS解析URL对应的IP。

　　4、根据IP建立TCP连接（三次握手）。

![img](https://images2015.cnblogs.com/blog/1034346/201703/1034346-20170329145607592-1103856922.png)

　　5、HTTP Reques发起请求。　　

​        完整的HTTP请求包含请求起始行、请求头部、请求主体三部分。

　　6、服务器处理请求，浏览器接收HTTP Response响应。

```
   1xx：指示信息–表示请求已接收，继续处理。

　　2xx：成功–表示请求已被成功接收、理解、接受。

　　3xx：重定向–要完成请求必须进行更进一步的操作。

　　4xx：客户端错误–请求有语法错误或请求无法实现。

　　5xx：服务器端错误–服务器未能实现合法的请求。
```

　　7、渲染页面，构建DOM树。

　　8、关闭TCP连接（四次挥手）。



从网络协议层面来看:

![img](https://images2015.cnblogs.com/blog/1034346/201703/1034346-20170329153945389-2019926409.png)

1、应用层进行DNS解析

　　通过DNS将域名解析成IP地址。在解析过程中，按照`浏览器缓存`、`系统缓存`、`路由器缓存`、`ISP(运营商)DNS缓存`、`根域名服务器`、`顶级域名服务器`、`主域名服务器`的顺序，逐步读取缓存，直到拿到IP地址

2、应用层生成HTTP请求报文

　　接着，应用层生成针对目标WEB服务器的HTTP请求报文，HTTP请求报文包括起始行、首部和主体部分

3、传输层建立TCP连接

​        传输层传输协议分为UDP和TCP两种

　　UDP是无连接的协议，而TCP是可靠的有连接的协议，主要表现在：接收方会对收到的数据进行确认、发送方会重传接收方未确认的数据、接收方会将接收到数据按正确的顺序重新排序，并删除重复的数据、提供了控制拥挤的机制

　　HTTP协议使用的是TCP协议，为了方便通信

(1)HTTP请求报文按序号分为多个报文段**(segment)**，并对每个报文段进行封装。

(2)使用本地一个大于1024以上的随机TCP源端口建立到目的服务器TCP80号端口(HTTPS协议对应的端口号是443)的连接，**TCP源端口和目的端口**加入到报文段中，学名叫协议数据单元(Protocol Data Unit, PDU)。

(3)TCP是一个可靠的传输控制协议，传输层还会加入序列号、确认号、窗口大小、校验和等参数，共添加20字节的头部信息

![http](https://pic.xiaohuochai.site/blog/HTTP_network15.jpg)

构建TCP请求会增加大量的网络时延，常用的优化方式如下所示

　　（1）资源打包，合并请求

　　（2）多使用缓存，减少网络传输

　　（3）使用keep-alive建立持久连接

　　4、网络层使用IP协议来选择路线

​			处理上层传输层的数据段segment，将数据段segment装入数据包**packet**，主要就是添加**源和目的IP地址**，然后发送数据。在数据传输的过程中，IP协议负责选择传送的路线，称为路由功能

![http](https://pic.xiaohuochai.site/blog/HTTP_network12.jpg)

5、数据链路层实现网络相邻结点间可靠的数据通信

　　为了保证数据的可靠传输，把数据包packet封装成帧(**Frame**)，并按顺序传送各帧。由于物理线路的不可靠，发出的数据帧有可能在线路上出错或丢失，于是为每个数据分块计算出CRC(循环冗余检验)，并把CRC添加到帧中，这样接收方就可以通过重新计算CRC来判断数据接收的正确性。一旦出错就重传

　　将数据包packet封装成帧(**Frame**)，包括帧头和帧尾。帧尾是添加被称做CRC的循环冗余校验部分。帧头主要是添加数据链路层的地址，即数据链路层的源地址和目的地址，即**网络相邻结点间的源MAC地址和目的MAC地址**

　　6、物理层传输数据

　　数据链路层的帧(Frame)转换成二进制形式的比特(Bit)流，从网卡发送出去，再把比特转换成电子、光学或微波信号在网络中传输

上面的6个步骤可总结为：DNS解析URL地址、生成HTTP请求报文、构建TCP连接、使用IP协议选择传输路线、数据链路层保证数据的可靠传输、物理层将数据转换成电子、光学或微波信号进行传输



# 6、进程 vs 线程

进程：**进程是资源分配的最小单位**。保存在硬盘上的程序运行以后，会在内存空间里形成一个独立的内存体，这个内存体**有自己独立的地址空间，有自己的堆**，上级挂靠单位是操作系统。操作系统会以进程为单位，分配系统资源（CPU时间片、内存等资源）。

线程：轻量级进程(Lightweight Process，LWP），是**操作系统调度（CPU调度）执行的最小单位**。

#### 进程和线程的区别与联系

【区别】：

- **调度**：**线程作为调度和分配的基本单位，进程作为拥有资源的基本单位**；
- **并发性**：**不仅进程之间可以并发执行，同一个进程的多个线程之间也可并发执行**；
- **拥有资源**：**进程是拥有资源的一个独立单位，线程不拥有系统资源**，但可以访问隶属于进程的资源。进程所维护的是程序所包含的资源（静态资源）， 如：**地址空间，打开的文件句柄集，文件系统状态，信号处理handler等**；线程所维护的运行相关的资源（动态资源），如：**运行栈，调度相关的控制信息，待处理的信号集等**；
- **系统开销**：在创建或撤消进程时，由于系统都要为之分配和回收资源，导致系统的开销明显大于创建或撤消线程时的开销。但是进程有独立的地址空间，一个进程崩溃后，在保护模式下不会对其它进程产生影响，而线程只是一个进程中的不同执行路径。线程有自己的堆栈和局部变量，但线程之间没有单独的地址空间，一个进程死掉就等于所有的线程死掉，所以**多进程的程序要比多线程的程序健壮，但在进程切换时，耗费资源较大，效率要差一些**。

【联系】：

- 线程在执行过程中，需要协作同步。不同进程的线程间要利用消息通信的办法实现同步。
- 线程共享整个进程的资源（寄存器、堆栈、上下文）线程中执行时一般都要进行同步和互斥，因为他们共享同一进程的所有资源；

 

|              | 进程                                                       | 线程                                       |
| ------------ | ---------------------------------------------------------- | ------------------------------------------ |
| 概念         | 资源分配的独立单元                                         | CPU调度的基本单元                          |
| 切换所需资源 | 大                                                         | 中                                         |
| 效率         | 低                                                         | 一般                                       |
| 拥有资源     | 独立的堆栈（全局变量保存在堆中，局部变量及函数保存在栈中） | 独立的栈，共享堆                           |
| 关系         | 一个进程包含多个线程，至少包含一个线程                     |                                            |
| 结束的影响   | 进程结束后所有线程将被销毁                                 | 线程结束不影响其他线程                     |
| 系统资源     | 拥有系统资源                                               | 不拥有系统资源，可以访问隶属于该进程的资源 |
|              |                                                            |                                            |



#### 一个形象的例子解释进程和线程的区别

![在这里插入图片描述](http://blog.chinaunix.net/attachment/201310/23/29270628_1382541951nJe7.jpg)

这副图是一个双向多车道的道路图，假如我们**把整条道路看成是一个“进程”的话**，那么图中由白色虚线分隔开来的**各个车道就是进程中的各个“线程”了**。

- **这些线程(车道)共享了进程(道路)的公共资源(土地资源)**。
- 这些线程(车道)必须依赖于进程(道路)，也就是说，**线程不能脱离于进程而存在(就像离开了道路，车道也就没有意义了)**。
- **这些线程(车道)之间可以并发执行(各个车道你走你的，我走我的)，也可以互相同步(某些车道在交通灯亮时禁止继续前行或转弯，必须等待其它车道的车辆通行完毕)**。
- **这些线程(车道)之间依靠代码逻辑(交通灯)来控制运行，一旦代码逻辑控制有误(死锁，多个线程同时竞争唯一资源)，那么线程将陷入混乱，无序之中**。
- **这些线程(车道)之间谁先运行是未知的**，只有在线程刚好被分配到CPU时间片(交通灯变化)的那一刻才能知道。

![在这里插入图片描述](http://5b0988e595225.cdn.sohucs.com/images/20180622/6765e36cc4604fba897976638af03524.jpeg)

#### 协程--一种比线程更加轻量级的存在

​		协程不是被操作系统内核所管理，而完全是由程序所控制（也就是在用户态执行）。这样带来的好处就是性能得到了很大的提升，不会像线程切换那样消耗资源。

  子程序，或者称为函数，在所有语言中都是层级调用，比如A调用B，B在执行过程中又调用了C，C执行完毕返回，B执行完毕返回，最后是A执行完毕。所以子程序调用是通过**栈实现的**，**一个线程就是执行一个子程序**。子程序调用总是一个入口，一次返回，调用顺序是明确的。而协程的调用和子程序不同。

  **协程在子程序内部是可中断的，然后转而执行别的子程序，在适当的时候再返回来接着执行**。\





